{% extends "standbase/base.html" %}


{% block head %}Somebody stood for <a href="{% url 'topic' s.topic_slug %}">{{ s.message }}</a>{% endblock head %}


{% block extrahead %}
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
  <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>

  <style type="text/css">
    #map {
      height: 600px;
    }
  </style>
{% endblock extrahead %}


{% block content %}
  <div class="container">

    <div class="row">
      <div class="col-md-6" id="content">
        <h1>Stood for {{ s.message }}</h1>

        <p>On: {{ s.datecreated }}</p>

        <p>Near: {{ s.nearest_available_area }}</p>

        <p>Duration: {{ s.datefinished|timeuntil:s.datecreated }}</p>
      </div>

      <div class="col-md-6 google-map-canvas" id="map"></div>
    </div>
  </div>
  
  <script type="text/javascript">
    var map = L.map('map').setView([{{ s.lat }}, {{ s.lon }}], 13);
    
    L.tileLayer('http://{s}.tile.cloudmade.com/d835804aba7d4dea8039b3f6c6b8b23e/997/256/{z}/{x}/{y}.png', {
      attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>',
      maxZoom: 18
  }).addTo(map);

  var marker = L.marker([{{ s.lat }}, {{ s.lon }}]).addTo(map);

  </script>
{% endblock content %}